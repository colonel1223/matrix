from pathlib import Path
import shutil

file = Path("index.html")

if not file.exists():
    print("index.html not found")
    exit()

backup = Path("index_backup.html")
shutil.copy(file, backup)
print("Backup created")

html = file.read_text()

CSS = """
<style>
.top-status-wrap{position:sticky;top:0;z-index:999;background:rgba(0,0,0,.55);border-bottom:1px solid rgba(255,60,60,.18)}
.top-status{max-width:1100px;margin:auto;padding:14px;display:grid;grid-template-columns:1fr 1fr;gap:14px}
.credit-card,.countdown-card{border:1px solid rgba(255,60,60,.22);border-radius:14px;padding:12px;background:rgba(10,0,0,.35)}
.countdown-time{font-size:18px}
</style>
"""

TOPBAR = """
<div class="top-status-wrap">
<div class="top-status">
<div class="credit-card">
<strong>Spencer Kitaro Cottrell</strong> Â· @colonel1223
<div>TODAY <span id="todayDate"></span></div>
<div>LAST UPDATED <span id="lastUpdated"></span></div>
</div>
<div class="countdown-card">
<div>MODEL COUNTDOWN</div>
<div class="countdown-time" id="countdownLive"></div>
</div>
</div>
</div>
"""

JS = """
<script>
function f(d){return d.toISOString().slice(0,16).replace("T"," ")}
document.getElementById("todayDate")&&(document.getElementById("todayDate").textContent=f(new Date()))
document.getElementById("lastUpdated")&&(document.getElementById("lastUpdated").textContent=f(new Date()))
const target=new Date("2026-12-01T00:00:00")
setInterval(()=>{
let s=(target-new Date())/1000
if(s<0)s=0
let d=Math.floor(s/86400),h=Math.floor(s%86400/3600),m=Math.floor(s%3600/60)
document.getElementById("countdownLive")&&(document.getElementById("countdownLive").textContent=d+"d "+h+"h "+m+"m")
},1000)
</script>
"""

if "</head>" in html:
    html = html.replace("</head>", CSS + "</head>")

if "<body>" in html:
    html = html.replace("<body>", "<body>" + TOPBAR)

if "</body>" in html:
    html = html.replace("</body>", JS + "</body>")

file.write_text(html)

print("Installed successfully")


git add .
git commit -m "add countdown and status"
git push

cd ~/Desktop/matrix


